{% doc %}
  Renders a product card with image, title, and price.
  Format portrait 9:16 pour toutes les images

  @param {product} product - The product object to display
  @param {boolean} [show_vendor] - Whether to show the product vendor

  @example
  {% render 'product-card', product: product %}
{% enddoc %}

<article class="product-card">
  <a href="{{ product.url }}" class="product-card__link">
    <div class="product-card__media">
      {%- if product.featured_image -%}
        <img
          src="{{ product.featured_image | image_url: width: 400 }}"
          srcset="
            {{ product.featured_image | image_url: width: 300 }} 300w,
            {{ product.featured_image | image_url: width: 400 }} 400w,
            {{ product.featured_image | image_url: width: 600 }} 600w,
            {{ product.featured_image | image_url: width: 800 }} 800w"
          sizes="(max-width: 479px) 45vw, (max-width: 767px) 45vw, (max-width: 1023px) 30vw, 300px"
          alt="{{ product.featured_image.alt | escape | default: product.title }}"
          loading="lazy"
          decoding="async"
          class="product-card__img"
        >
      {%- else -%}
        <div class="product-card__placeholder"></div>
      {%- endif -%}

      {%- if product.compare_at_price > product.price -%}
        <span class="product-card__badge product-card__badge--sale">Promo</span>
      {%- endif -%}

      {%- unless product.available -%}
        <span class="product-card__badge product-card__badge--soldout">Épuisé</span>
      {%- endunless -%}
    </div>

    <div class="product-card__info">
      {%- if show_vendor and product.vendor -%}
        <span class="product-card__vendor">{{ product.vendor }}</span>
      {%- endif -%}

      <h3 class="product-card__title">{{ product.title }}</h3>

      <div class="product-card__price">
        {%- if product.compare_at_price > product.price -%}
          <span class="product-card__price-compare">{{ product.compare_at_price | money }}</span>
        {%- endif -%}
        <span class="product-card__price-current {% if product.compare_at_price > product.price %}product-card__price-current--sale{% endif %}">
          {{ product.price | money }}
        </span>
      </div>
    </div>
  </a>
</article>

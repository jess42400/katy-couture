{% doc %}
  Renders product price with optional compare-at price.

  @param {product|variant} product - The product or variant to get price from
  @param {string} [size] - Price size: 'small', 'default', 'large' (default: 'default')
  @param {boolean} [show_compare] - Whether to show compare-at price

  @example
  {% render 'price', product: product %}
  {% render 'price', product: product.selected_or_first_available_variant, size: 'large' %}
{% enddoc %}

{%- liquid
  assign size_class = ''
  if size == 'small'
    assign size_class = 'price--small'
  elsif size == 'large'
    assign size_class = 'price--large'
  endif

  assign show_compare = show_compare | default: true
  assign has_discount = false
  if product.compare_at_price > product.price
    assign has_discount = true
  endif
-%}

<div class="price {{ size_class }}">
  {%- if has_discount and show_compare -%}
    <span class="price__compare">{{ product.compare_at_price | money }}</span>
  {%- endif -%}
  <span class="price__current {% if has_discount %}price__current--sale{% endif %}">
    {{ product.price | money }}
  </span>
</div>

{% stylesheet %}
  .price {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    font-size: var(--text-lg);
  }

  .price--small {
    font-size: var(--text-sm);
  }

  .price--large {
    font-size: var(--heading-md);
  }

  .price__compare {
    text-decoration: line-through;
    color: var(--color-muted);
    font-size: 0.85em;
  }

  .price__current--sale {
    color: var(--color-accent);
  }
{% endstylesheet %}

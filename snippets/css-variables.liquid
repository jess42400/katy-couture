{% doc %}
  Renders global CSS variables from theme settings.
  This snippet should be included in the <head> of the layout.
  Works alongside assets/base.css to provide dynamic theme customization.

  @example
  {% render 'css-variables' %}
{% enddoc %}

{% style %}
  /* Font faces - Body */
  {{ settings.type_primary_font | font_face: font_display: 'swap' }}
  {{ settings.type_primary_font | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}
  {{ settings.type_primary_font | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}

  /* Font faces - Headings */
  {{ settings.type_heading_font | font_face: font_display: 'swap' }}
  {{ settings.type_heading_font | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}
  {{ settings.type_heading_font | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}

  :root {
    /* Typography - Headings (override base.css with theme settings) */
    --font-heading: {{ settings.type_heading_font.family }}, {{ settings.type_heading_font.fallback_families }};
    --font-heading-style: {{ settings.type_heading_font.style }};
    --font-heading-weight: {{ settings.type_heading_font.weight }};
    --font-heading-scale: {{ settings.heading_font_size_scale | divided_by: 100.0 }};

    /* Typography - Body (override base.css with theme settings) */
    --font-body: {{ settings.type_primary_font.family }}, {{ settings.type_primary_font.fallback_families }};
    --font-body-style: {{ settings.type_primary_font.style }};
    --font-body-weight: {{ settings.type_primary_font.weight }};
    --font-body-scale: {{ settings.body_font_size_scale | divided_by: 100.0 }};

    /* Colors (override base.css with theme settings) */
    --color-bg: {{ settings.color_background }};
    --color-text: {{ settings.color_foreground }};
    --color-accent: {{ settings.color_accent }};
    --color-accent-contrast: {{ settings.color_accent_contrast }};
    --color-secondary: {{ settings.color_secondary }};
    --color-secondary-contrast: {{ settings.color_secondary_contrast }};
    --color-border: {{ settings.color_border }};

    /* Color variations */
    --color-bg-alt: {{ settings.color_background | color_darken: 3 }};
    --color-muted: {{ settings.color_foreground | color_lighten: 30 }};
    --color-accent-hover: {{ settings.color_accent | color_darken: 10 }};

    /* Layout */
    --page-width: {{ settings.max_page_width }};
    --page-margin: {{ settings.min_page_margin }}px;
    --gap-sections: {{ settings.section_spacing }}px;

    /* Buttons & Inputs */
    --button-radius: {{ settings.button_border_radius }}px;
    --input-radius: {{ settings.input_border_radius }}px;

    /* Animations */
    --animation-duration: {% if settings.enable_animations %}{% case settings.animation_style %}{% when 'subtle' %}0.2s{% when 'elegant' %}0.4s{% when 'dramatic' %}0.6s{% endcase %}{% else %}0s{% endif %};
    --animation-easing: cubic-bezier(0.25, 0.1, 0.25, 1);
    --animation-easing-out: cubic-bezier(0.16, 1, 0.3, 1);

    /* Typography scale (uses font scale from settings) */
    --text-xs: calc(0.75rem * var(--font-body-scale, 1));
    --text-sm: calc(0.875rem * var(--font-body-scale, 1));
    --text-base: calc(1rem * var(--font-body-scale, 1));
    --text-lg: calc(1.125rem * var(--font-body-scale, 1));
    --text-xl: calc(1.25rem * var(--font-body-scale, 1));

    --heading-sm: calc(1.25rem * var(--font-heading-scale, 1));
    --heading-md: calc(1.5rem * var(--font-heading-scale, 1));
    --heading-lg: calc(2rem * var(--font-heading-scale, 1));
    --heading-xl: calc(2.5rem * var(--font-heading-scale, 1));
    --heading-2xl: calc(3rem * var(--font-heading-scale, 1));
    --heading-3xl: calc(4rem * var(--font-heading-scale, 1));
    --heading-display: calc(5rem * var(--font-heading-scale, 1));
  }

  @media (max-width: 768px) {
    :root {
      --heading-display: calc(3rem * var(--font-heading-scale, 1));
      --heading-3xl: calc(2.5rem * var(--font-heading-scale, 1));
      --heading-2xl: calc(2rem * var(--font-heading-scale, 1));
      --gap-sections: calc({{ settings.section_spacing }}px * 0.6);
    }
  }
{% endstyle %}

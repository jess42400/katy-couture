{%- comment -%}
  HEADER - Logo centré, menu split
  TRANSPARENT sur hero, SOLIDE au scroll
  Sous-menu Catalogue au hover
{%- endcomment -%}

<style>
  .header__logo { line-height: 1.2 !important; padding: 4px 0 !important; }
  .mobile-menu { background-color: #1A1A1A !important; }
  .mobile-menu__logo { color: #C9A962 !important; }
  .mobile-menu__link { color: #F5F2EB !important; border-bottom-color: rgba(255,255,255,0.12) !important; }
  .mobile-menu__close { color: #F5F2EB !important; }
  .mobile-menu__close svg { stroke: #F5F2EB !important; }
  .mobile-menu__header { border-bottom-color: rgba(255,255,255,0.12) !important; }
  .mobile-menu__footer { border-top-color: rgba(255,255,255,0.12) !important; }
  .mobile-menu__social a { color: #F5F2EB !important; border-color: rgba(255,255,255,0.2) !important; }
  .mobile-menu[data-open="true"]::before { pointer-events: auto !important; }
  .shop-overlay { background-color: #1A1A1A !important; }
  .shop-overlay__header { background-color: #1A1A1A !important; border-bottom-color: rgba(255,255,255,0.12) !important; }
  .shop-overlay__title { color: #F5F2EB !important; }
  .shop-overlay__close { color: #F5F2EB !important; }
  .shop-overlay__input { color: #F5F2EB !important; }
  .shop-overlay__input::placeholder { color: rgba(245,242,235,0.5) !important; }
  .shop-overlay__submit { color: #F5F2EB !important; }
  .shop-overlay__search { background-color: rgba(255,255,255,0.08) !important; border-color: rgba(255,255,255,0.15) !important; }
  .shop-overlay__collection-title { color: #F5F2EB !important; }
</style>

<header class="header" data-header style="background-color: #1A1A1A;">
  <div class="header__inner">
    {%- comment -%} Menu Burger {%- endcomment -%}
    <button class="header__menu-toggle" data-menu-toggle aria-label="Menu">
      <span class="header__menu-icon">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>

    {%- comment -%} Logo Centré {%- endcomment -%}
    <a href="/" class="header__logo" style="color: #C9A962; line-height: 1.2;">
      {%- if settings.logo -%}
        <img
          src="{{ settings.logo | image_url: width: 200 }}"
          alt="{{ shop.name }}"
          width="{{ settings.logo_width | default: 120 }}"
          height="auto"
        >
      {%- else -%}
        KATY COUTURE
      {%- endif -%}
    </a>

    {%- comment -%} Actions (thème + recherche + panier) {%- endcomment -%}
    <div class="header__actions">
      {%- comment -%} Theme Switcher {%- endcomment -%}
      <div class="theme-switcher" data-theme-switcher>
        <button class="header__action theme-switcher__toggle" aria-label="Changer de thème" data-theme-toggle>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
        </button>
        <div class="theme-switcher__menu" data-theme-menu>
          <button class="theme-switcher__option" data-theme="light">
            <span class="theme-switcher__swatch theme-switcher__swatch--light"></span>
            Clair
          </button>
          <button class="theme-switcher__option" data-theme="dark">
            <span class="theme-switcher__swatch theme-switcher__swatch--dark"></span>
            Gris
          </button>
          <button class="theme-switcher__option" data-theme="slate">
            <span class="theme-switcher__swatch theme-switcher__swatch--slate"></span>
            Ardoise
          </button>
          <button class="theme-switcher__option" data-theme="sepia">
            <span class="theme-switcher__swatch theme-switcher__swatch--sepia"></span>
            Sépia
          </button>
        </div>
      </div>

      <button class="header__action" aria-label="Rechercher" data-search-toggle>
        {% render 'icon-search' %}
      </button>
      <a href="/cart" class="header__action header__action--cart" aria-label="Panier">
        {% render 'icon-cart' %}
        {%- if cart.item_count > 0 -%}
          <span class="header__cart-count" data-cart-count>{{ cart.item_count }}</span>
        {%- endif -%}
      </a>
    </div>
  </div>
</header>

{%- comment -%} Search/Shop Overlay {%- endcomment -%}
<div class="shop-overlay" data-search-overlay style="background-color: #1A1A1A;">
  <div class="shop-overlay__header" style="background-color: #1A1A1A; border-bottom-color: rgba(255,255,255,0.12);">
    <h2 class="shop-overlay__title" style="color: #F5F2EB;">Nos Collections</h2>
    <button class="shop-overlay__close" data-search-close aria-label="Fermer" style="color: #F5F2EB;">
      {% render 'icon-close' %}
    </button>
  </div>

  <div class="shop-overlay__content">
    {%- comment -%} Barre de recherche {%- endcomment -%}
    <form action="/search" method="get" class="shop-overlay__search">
      <input
        type="search"
        name="q"
        placeholder="Rechercher un produit..."
        class="shop-overlay__input"
        autocomplete="off"
        data-search-input
      >
      <button type="submit" class="shop-overlay__submit" aria-label="Rechercher">
        {% render 'icon-search' %}
      </button>
    </form>

    {%- comment -%} Collections dynamiques {%- endcomment -%}
    <div class="shop-overlay__collections">
      {%- for collection in collections -%}
        {%- unless collection.handle == 'all' or collection.handle == 'frontpage' -%}
          <a href="{{ collection.url }}" class="shop-overlay__collection">
            <div class="shop-overlay__collection-image">
              {%- if collection.image -%}
                <img src="{{ collection.image | image_url: width: 400 }}" alt="{{ collection.title }}">
              {%- elsif collection.products.first.featured_image -%}
                <img src="{{ collection.products.first.featured_image | image_url: width: 400 }}" alt="{{ collection.title }}">
              {%- else -%}
                <div class="shop-overlay__placeholder"></div>
              {%- endif -%}
            </div>
            <span class="shop-overlay__collection-title">{{ collection.title }}</span>
          </a>
        {%- endunless -%}
      {%- endfor -%}

      {%- comment -%} Lien vers toutes les collections {%- endcomment -%}
      <a href="/collections/all" class="shop-overlay__collection shop-overlay__collection--all">
        <div class="shop-overlay__collection-image">
          <div class="shop-overlay__placeholder shop-overlay__placeholder--all">
            <span>Tout voir</span>
          </div>
        </div>
        <span class="shop-overlay__collection-title">Tous les produits</span>
      </a>
    </div>
  </div>
</div>

{%- comment -%} Mobile Menu {%- endcomment -%}
<div class="mobile-menu" data-mobile-menu data-open="false" style="background-color: #1A1A1A;">
  <div class="mobile-menu__header" style="border-bottom-color: rgba(255,255,255,0.12);">
    <a href="/" class="mobile-menu__logo" style="color: #C9A962;">KATY COUTURE</a>
    <button class="mobile-menu__close" data-menu-close aria-label="Fermer" style="color: #F5F2EB;">
      {% render 'icon-close' %}
    </button>
  </div>

  <nav class="mobile-menu__nav">
    <a href="/" class="mobile-menu__link">Accueil</a>
    <a href="/collections/all" class="mobile-menu__link">Boutique</a>
    <a href="/pages/notre-histoire" class="mobile-menu__link">Notre histoire</a>
    <a href="/pages/contact" class="mobile-menu__link">Contact</a>
  </nav>

  <div class="mobile-menu__footer">
    <div class="mobile-menu__social">
      {%- if settings.social_instagram_link != blank -%}
        <a href="{{ settings.social_instagram_link }}" target="_blank" rel="noopener">{% render 'icon-instagram' %}</a>
      {%- endif -%}
      {%- if settings.social_tiktok_link != blank -%}
        <a href="{{ settings.social_tiktok_link }}" target="_blank" rel="noopener">{% render 'icon-tiktok' %}</a>
      {%- endif -%}
      {%- if settings.social_pinterest_link != blank -%}
        <a href="{{ settings.social_pinterest_link }}" target="_blank" rel="noopener">{% render 'icon-pinterest' %}</a>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "En-tête",
  "settings": []
}
{% endschema %}

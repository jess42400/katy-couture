{%- comment -%}
  FEATURED COLLECTION
  Display products from a selected collection
{%- endcomment -%}

<section class="section featured-collection">
  <div class="container">
    <header class="featured-collection__header">
      {%- if section.settings.subtitle != blank -%}
        <p class="featured-collection__subtitle">{{ section.settings.subtitle }}</p>
      {%- endif -%}

      {%- if section.settings.title != blank -%}
        <h2 class="featured-collection__title">{{ section.settings.title }}</h2>
      {%- endif -%}

      {%- if section.settings.description != blank -%}
        <p class="featured-collection__description">{{ section.settings.description }}</p>
      {%- endif -%}
    </header>

    <div class="grid grid--3">
      {%- if section.settings.collection != blank -%}
        {%- for product in section.settings.collection.products limit: section.settings.products_count -%}
          {% render 'product-card', product: product %}
        {%- endfor -%}
      {%- else -%}
        {%- for i in (1..section.settings.products_count) -%}
          <article class="product-card">
            <div class="product-card__media aspect-ratio aspect-ratio--4-5">
              <div class="product-card__placeholder" style="background-color: #f0f0f0;"></div>
            </div>
            <div class="product-card__info">
              <h3 class="product-card__title">Nom du produit</h3>
              <div class="product-card__price">{{ 4900 | money }}</div>
            </div>
          </article>
        {%- endfor -%}
      {%- endif -%}
    </div>

    {%- if section.settings.show_view_all and section.settings.collection != blank -%}
      <footer class="featured-collection__footer">
        <a href="{{ section.settings.collection.url }}" class="btn btn--secondary">
          {{ section.settings.view_all_label | default: 'Voir tout' }}
        </a>
      </footer>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Collection vedette",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Sous-titre",
      "default": "Nos créations"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre",
      "default": "Chèches artisanaux"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_count",
      "min": 3,
      "max": 12,
      "step": 3,
      "label": "Nombre de produits",
      "default": 6
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Afficher bouton voir tout",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_label",
      "label": "Texte du bouton",
      "default": "Voir la collection"
    }
  ],
  "presets": [
    {
      "name": "Collection vedette"
    }
  ]
}
{% endschema %}

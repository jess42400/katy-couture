<section class="featured-collection">
  <div class="featured-collection__header {{ section.settings.header_alignment }}">
    {%- if section.settings.subheading != blank -%}
      <span class="featured-collection__subheading">{{ section.settings.subheading }}</span>
    {%- endif -%}

    {%- if section.settings.heading != blank -%}
      <h2 class="featured-collection__heading">{{ section.settings.heading }}</h2>
    {%- endif -%}

    {%- if section.settings.description != blank -%}
      <p class="featured-collection__description">{{ section.settings.description }}</p>
    {%- endif -%}
  </div>

  {%- if section.settings.collection != blank -%}
    <div class="featured-collection__grid grid grid--{{ section.settings.columns }}">
      {%- for product in section.settings.collection.products limit: section.settings.products_count -%}
        {% render 'product-card',
          product: product,
          show_vendor: section.settings.show_vendor,
          show_secondary_image: section.settings.show_secondary_image,
          image_ratio: section.settings.image_ratio,
          alignment: section.settings.card_alignment
        %}
      {%- else -%}
        {%- for i in (1..section.settings.products_count) -%}
          <article class="product-card product-card--placeholder">
            <div class="product-card__image product-card__image--{{ section.settings.image_ratio }}">
              <div class="product-card__placeholder">
                {{ 'product-' | append: forloop.index | placeholder_svg_tag }}
              </div>
            </div>
            <div class="product-card__info">
              <h3 class="product-card__title">{{ 'products.placeholder_title' | t }}</h3>
              <div class="product-card__price">{{ 9999 | money }}</div>
            </div>
          </article>
        {%- endfor -%}
      {%- endfor -%}
    </div>

    {%- if section.settings.show_view_all and section.settings.collection.products.size > section.settings.products_count -%}
      <div class="featured-collection__footer">
        {% render 'button',
          label: section.settings.view_all_label,
          url: section.settings.collection.url,
          style: 'secondary'
        %}
      </div>
    {%- endif -%}
  {%- else -%}
    <div class="featured-collection__grid grid grid--{{ section.settings.columns }}">
      {%- for i in (1..section.settings.products_count) -%}
        <article class="product-card product-card--placeholder">
          <div class="product-card__image product-card__image--{{ section.settings.image_ratio }}">
            <div class="product-card__placeholder">
              {{ 'product-' | append: forloop.index | placeholder_svg_tag }}
            </div>
          </div>
          <div class="product-card__info">
            <h3 class="product-card__title">{{ 'products.placeholder_title' | t }}</h3>
            <div class="product-card__price">{{ 9999 | money }}</div>
          </div>
        </article>
      {%- endfor -%}
    </div>
  {%- endif -%}
</section>

{% stylesheet %}
  .featured-collection {
    display: flex;
    flex-direction: column;
    gap: var(--gap-xl);
  }

  .featured-collection__header {
    display: flex;
    flex-direction: column;
    gap: var(--gap-sm);
  }

  .featured-collection__header--left { text-align: left; }
  .featured-collection__header--center {
    text-align: center;
    align-items: center;
  }
  .featured-collection__header--right {
    text-align: right;
    align-items: flex-end;
  }

  .featured-collection__subheading {
    font-size: var(--text-sm);
    font-weight: 500;
    letter-spacing: var(--letter-spacing-wider);
    text-transform: uppercase;
    color: var(--color-accent);
  }

  .featured-collection__heading {
    font-size: var(--heading-2xl);
    margin: 0;
  }

  .featured-collection__description {
    font-size: var(--text-lg);
    color: var(--color-muted);
    max-width: 40rem;
    margin: 0;
  }

  .featured-collection__footer {
    display: flex;
    justify-content: center;
    margin-top: var(--gap-lg);
  }

  .product-card--placeholder .product-card__placeholder {
    background-color: var(--color-bg-alt);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.featured_collection.name",
  "tag": "section",
  "class": "section-featured-collection",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.featured_collection.settings.header"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "t:labels.subheading",
      "default": "Selection"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:labels.heading",
      "default": "Nos pieces signatures"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "t:labels.description"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "t:labels.alignment",
      "options": [
        { "value": "featured-collection__header--left", "label": "t:options.alignment.left" },
        { "value": "featured-collection__header--center", "label": "t:options.alignment.center" },
        { "value": "featured-collection__header--right", "label": "t:options.alignment.right" }
      ],
      "default": "featured-collection__header--center"
    },
    {
      "type": "header",
      "content": "t:sections.featured_collection.settings.collection"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "t:labels.collection"
    },
    {
      "type": "range",
      "id": "products_count",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "t:sections.featured_collection.settings.products_count",
      "default": 4
    },
    {
      "type": "select",
      "id": "columns",
      "label": "t:labels.columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "4"
    },
    {
      "type": "header",
      "content": "t:sections.featured_collection.settings.product_card"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "label": "t:labels.image_ratio",
      "options": [
        { "value": "portrait", "label": "t:options.image_ratio.portrait" },
        { "value": "square", "label": "t:options.image_ratio.square" },
        { "value": "landscape", "label": "t:options.image_ratio.landscape" }
      ],
      "default": "portrait"
    },
    {
      "type": "select",
      "id": "card_alignment",
      "label": "t:sections.featured_collection.settings.card_alignment",
      "options": [
        { "value": "left", "label": "t:options.alignment.left" },
        { "value": "center", "label": "t:options.alignment.center" }
      ],
      "default": "left"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "t:sections.featured_collection.settings.show_vendor",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "label": "t:sections.featured_collection.settings.show_secondary_image",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.featured_collection.settings.view_all"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "t:sections.featured_collection.settings.show_view_all",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_label",
      "label": "t:sections.featured_collection.settings.view_all_label",
      "default": "Voir la collection"
    }
  ],
  "presets": [
    {
      "name": "t:sections.featured_collection.name"
    }
  ]
}
{% endschema %}
